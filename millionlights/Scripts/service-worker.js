"use strict";function handle_click(n,t){return console.log(n),fetch("https://ml.pushengage.com/notification.php?updateclicks&device="+t+"&tag="+n.notification.tag).then(function(n){console.log("clicked")}),clients.openWindow(n.notification.data)}function handle_notification(n,t){return self.registration.showNotification(n,t)}self.addEventListener("push",function(n){n.waitUntil(self.registration.pushManager.getSubscription().then(function(n){return fetch("https://ml.pushengage.com/notification.php?getmesg&version=1&device="+n.endpoint.slice(n.endpoint.search("send/")+5)).then(function(n){return n.json().then(function(n){for(var t=JSON.parse(n),i=[],e="",o=t.length-1;o>=0;o--)e={body:t[o].body,tag:t[o].tag,icon:t[o].icon,data:t[o].url},i.push(handle_notification(t[o].title,e));return Promise.all(i)})})}))});var device="";self.addEventListener("notificationclick",function(n){n.waitUntil(self.registration.pushManager.getSubscription().then(function(t){device=t.endpoint.slice(t.endpoint.search("send/")+5),handle_click(n,device)}))}),self.addEventListener("install",function(n){n.waitUntil(self.skipWaiting())});